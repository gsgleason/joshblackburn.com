{% set title = "Josh Blackburn Contact Page" %}
{% extends "base.html" %}
{% block body %}
<script src='https://www.google.com/recaptcha/api.js'></script>
<div class="container">
<form method="post" id="contact">
  <div class="form-group">
    <label for="name">What's your name?</label>
    <input type="text" class="form-control" id="name" name="name" required autofocus onkeyup="disableIfBlank()">
  </div>
  <div class="form-group">
    <label for="email">What's your email address?</label>
    <input type="email" class="form-control" id="email" name="email" required onkeyup="disableIfBlank()">
  </div>
  <div class="form-group">
    <label for="message">What say you?</label>
    <textarea class="form-control" rows="5" id="message" name="message" required onkeyup="disableIfBlank()"></textarea>
  </div>
  <div class="form-group">
    <div class="g-recaptcha" data-sitekey="{{ site_key }}" data-theme="dark" data-callback="captchaDone"></div>
  </div>
  <button type="submit" name="submit" class="btn btn-default">Submit</button>
</form>
</div>
<script>
var captcha = false;
function disableIfBlank() {
    if(document.forms['contact'].name.value == "" || document.forms['contact'].email.value == "" || document.forms['contact'].message.value == "" || captcha == false) {
        document.forms['contact'].submit.disabled=true;
    } else {
        document.forms['contact'].submit.disabled=false;
    }
}
disableIfBlank();
function captchaDone(response) {
    captcha = true;
    disableIfBlank();
}
</script>

{% endblock %}
